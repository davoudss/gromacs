\hypertarget{p2p__send__recv_8c}{\section{src/gmxlib/thread\-\_\-mpi/p2p\-\_\-send\-\_\-recv.c \-File \-Reference}
\label{p2p__send__recv_8c}\index{src/gmxlib/thread\-\_\-mpi/p2p\-\_\-send\-\_\-recv.\-c@{src/gmxlib/thread\-\_\-mpi/p2p\-\_\-send\-\_\-recv.\-c}}
}
{\ttfamily \#include $<$errno.\-h$>$}\*
{\ttfamily \#include $<$stdlib.\-h$>$}\*
{\ttfamily \#include $<$stdio.\-h$>$}\*
{\ttfamily \#include $<$stdarg.\-h$>$}\*
{\ttfamily \#include $<$string.\-h$>$}\*
{\ttfamily \#include \char`\"{}impl.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}p2p.\-h\char`\"{}}\*
\-Include dependency graph for p2p\-\_\-send\-\_\-recv.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c__incl}
\end{center}
\end{figure}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{p2p__send__recv_8c_a8c363c0e29a4b16eaafebcf91c212aa5}{t\-M\-P\-I\-\_\-\-Send} (\hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$buf, int count, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} datatype, int dest, int tag, \hyperlink{include_2thread__mpi_2tmpi_8h_ab76dc275b882a1d00a54353fb8dd4cb3}{t\-M\-P\-I\-\_\-\-Comm} comm)
\item 
int \hyperlink{p2p__send__recv_8c_ae606d72cbc14de10ac3a43ecb3d6a471}{t\-M\-P\-I\-\_\-\-Recv} (\hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$buf, int count, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} datatype, int source, int tag, \hyperlink{include_2thread__mpi_2tmpi_8h_ab76dc275b882a1d00a54353fb8dd4cb3}{t\-M\-P\-I\-\_\-\-Comm} comm, \hyperlink{include_2thread__mpi_2tmpi_8h_a531b9d68a797b1d19168df2fd83cb8aa}{t\-M\-P\-I\-\_\-\-Status} $\ast$status)
\item 
int \hyperlink{p2p__send__recv_8c_a7f9c95e26e0a84bf4e8abb9019607291}{t\-M\-P\-I\-\_\-\-Sendrecv} (\hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$sendbuf, int sendcount, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} sendtype, int dest, int sendtag, \hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$recvbuf, int recvcount, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} recvtype, int source, int recvtag, \hyperlink{include_2thread__mpi_2tmpi_8h_ab76dc275b882a1d00a54353fb8dd4cb3}{t\-M\-P\-I\-\_\-\-Comm} comm, \hyperlink{include_2thread__mpi_2tmpi_8h_a531b9d68a797b1d19168df2fd83cb8aa}{t\-M\-P\-I\-\_\-\-Status} $\ast$status)
\item 
int \hyperlink{p2p__send__recv_8c_a4bff3f1a8030935b136cd3949fcb305f}{t\-M\-P\-I\-\_\-\-Isend} (\hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$buf, int count, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} datatype, int dest, int tag, \hyperlink{include_2thread__mpi_2tmpi_8h_ab76dc275b882a1d00a54353fb8dd4cb3}{t\-M\-P\-I\-\_\-\-Comm} comm, \hyperlink{include_2thread__mpi_2tmpi_8h_ad41a753790479407462040a80099c73d}{t\-M\-P\-I\-\_\-\-Request} $\ast$request)
\item 
int \hyperlink{p2p__send__recv_8c_ade2c7a159a322dd7c78a9fb8aa9054d6}{t\-M\-P\-I\-\_\-\-Irecv} (\hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} $\ast$buf, int count, \hyperlink{include_2thread__mpi_2tmpi_8h_a5dfe10378be22fca9362e52f6abdf503}{t\-M\-P\-I\-\_\-\-Datatype} datatype, int source, int tag, \hyperlink{include_2thread__mpi_2tmpi_8h_ab76dc275b882a1d00a54353fb8dd4cb3}{t\-M\-P\-I\-\_\-\-Comm} comm, \hyperlink{include_2thread__mpi_2tmpi_8h_ad41a753790479407462040a80099c73d}{t\-M\-P\-I\-\_\-\-Request} $\ast$request)
\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{p2p__send__recv_8c_ade2c7a159a322dd7c78a9fb8aa9054d6}{\index{p2p\-\_\-send\-\_\-recv.\-c@{p2p\-\_\-send\-\_\-recv.\-c}!t\-M\-P\-I\-\_\-\-Irecv@{t\-M\-P\-I\-\_\-\-Irecv}}
\index{t\-M\-P\-I\-\_\-\-Irecv@{t\-M\-P\-I\-\_\-\-Irecv}!p2p_send_recv.c@{p2p\-\_\-send\-\_\-recv.\-c}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Irecv}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf t\-M\-P\-I\-\_\-\-Irecv} (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{buf, }
\item[{int}]{count, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{datatype, }
\item[{int}]{source, }
\item[{int}]{tag, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Comm}}]{comm, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Request} $\ast$}]{request}
\end{DoxyParamCaption}
)}}\label{p2p__send__recv_8c_ade2c7a159a322dd7c78a9fb8aa9054d6}
\-Initiate receiving a message.

\-This makes the buffer available to be filled with data. \-The contents of buf should not be relied on before the transmission is finished with \hyperlink{include_2thread__mpi_2tmpi_8h_a9cea5d5aad1d6b9d675d13cf9ff1acb7}{t\-M\-P\-I\-\_\-\-Wait()}, \hyperlink{include_2thread__mpi_2tmpi_8h_aaed5bf4b83939eaec49c4a6ed594eb7e}{t\-M\-P\-I\-\_\-\-Test()} or \hyperlink{include_2thread__mpi_2tmpi_8h_a2d09de79a46a51f0ddecff38410e261f}{t\-M\-P\-I\-\_\-\-Waitall()}.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt out}  & {\em buf} & \-The buffer for data to receive. \\
\hline
\mbox{\tt in}  & {\em count} & \-The maximum number of items to receive. \\
\hline
\mbox{\tt in}  & {\em datatype} & \-The data type of the items in buf. \\
\hline
\mbox{\tt in}  & {\em source} & \-The rank of the source thread (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-S\-O\-U\-R\-C\-E). \\
\hline
\mbox{\tt in}  & {\em tag} & \-The message tag (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-T\-A\-G). \\
\hline
\mbox{\tt in}  & {\em comm} & \-The shared communicator. \\
\hline
\mbox{\tt out}  & {\em request} & \-The request object that can be used in \hyperlink{include_2thread__mpi_2tmpi_8h_a9cea5d5aad1d6b9d675d13cf9ff1acb7}{t\-M\-P\-I\-\_\-\-Wait()}, t\-M\-P\-I\-\_\-\-Test, etc. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-T\-M\-P\-I\-\_\-\-S\-U\-C\-C\-E\-S\-S on success, \-T\-M\-P\-I\-\_\-\-F\-A\-I\-L\-U\-R\-E on failure. 
\end{DoxyReturn}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c_ade2c7a159a322dd7c78a9fb8aa9054d6_cgraph}
\end{center}
\end{figure}


\hypertarget{p2p__send__recv_8c_a4bff3f1a8030935b136cd3949fcb305f}{\index{p2p\-\_\-send\-\_\-recv.\-c@{p2p\-\_\-send\-\_\-recv.\-c}!t\-M\-P\-I\-\_\-\-Isend@{t\-M\-P\-I\-\_\-\-Isend}}
\index{t\-M\-P\-I\-\_\-\-Isend@{t\-M\-P\-I\-\_\-\-Isend}!p2p_send_recv.c@{p2p\-\_\-send\-\_\-recv.\-c}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Isend}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf t\-M\-P\-I\-\_\-\-Isend} (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{buf, }
\item[{int}]{count, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{datatype, }
\item[{int}]{dest, }
\item[{int}]{tag, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Comm}}]{comm, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Request} $\ast$}]{request}
\end{DoxyParamCaption}
)}}\label{p2p__send__recv_8c_a4bff3f1a8030935b136cd3949fcb305f}
\-Initiate sending a message, non-\/blocking.

\-This makes the buffer available to be received. \-The contents of buf should not be touched before the transmission is finished with \hyperlink{include_2thread__mpi_2tmpi_8h_a9cea5d5aad1d6b9d675d13cf9ff1acb7}{t\-M\-P\-I\-\_\-\-Wait()}, \hyperlink{include_2thread__mpi_2tmpi_8h_aaed5bf4b83939eaec49c4a6ed594eb7e}{t\-M\-P\-I\-\_\-\-Test()} or \hyperlink{include_2thread__mpi_2tmpi_8h_a2d09de79a46a51f0ddecff38410e261f}{t\-M\-P\-I\-\_\-\-Waitall()}.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt in}  & {\em buf} & \-The buffer with data to send. \\
\hline
\mbox{\tt in}  & {\em count} & \-The number of items to send. \\
\hline
\mbox{\tt in}  & {\em datatype} & \-The data type of the items in buf. \\
\hline
\mbox{\tt in}  & {\em dest} & \-The rank of the destination thread. \\
\hline
\mbox{\tt in}  & {\em tag} & \-The message tag. \\
\hline
\mbox{\tt in}  & {\em comm} & \-The shared communicator. \\
\hline
\mbox{\tt out}  & {\em request} & \-The request object that can be used in \hyperlink{include_2thread__mpi_2tmpi_8h_a9cea5d5aad1d6b9d675d13cf9ff1acb7}{t\-M\-P\-I\-\_\-\-Wait()}, t\-M\-P\-I\-\_\-\-Test, etc. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-T\-M\-P\-I\-\_\-\-S\-U\-C\-C\-E\-S\-S on success, \-T\-M\-P\-I\-\_\-\-F\-A\-I\-L\-U\-R\-E on failure. 
\end{DoxyReturn}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c_a4bff3f1a8030935b136cd3949fcb305f_cgraph}
\end{center}
\end{figure}


\hypertarget{p2p__send__recv_8c_ae606d72cbc14de10ac3a43ecb3d6a471}{\index{p2p\-\_\-send\-\_\-recv.\-c@{p2p\-\_\-send\-\_\-recv.\-c}!t\-M\-P\-I\-\_\-\-Recv@{t\-M\-P\-I\-\_\-\-Recv}}
\index{t\-M\-P\-I\-\_\-\-Recv@{t\-M\-P\-I\-\_\-\-Recv}!p2p_send_recv.c@{p2p\-\_\-send\-\_\-recv.\-c}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Recv}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf t\-M\-P\-I\-\_\-\-Recv} (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{buf, }
\item[{int}]{count, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{datatype, }
\item[{int}]{source, }
\item[{int}]{tag, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Comm}}]{comm, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Status} $\ast$}]{status}
\end{DoxyParamCaption}
)}}\label{p2p__send__recv_8c_ae606d72cbc14de10ac3a43ecb3d6a471}
\-Receive message; blocks until buf is filled.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt out}  & {\em buf} & \-The buffer for data to receive. \\
\hline
\mbox{\tt in}  & {\em count} & \-The maximum number of items to receive. \\
\hline
\mbox{\tt in}  & {\em datatype} & \-The data type of the items in buf. \\
\hline
\mbox{\tt in}  & {\em source} & \-The rank of the source thread (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-S\-O\-U\-R\-C\-E). \\
\hline
\mbox{\tt in}  & {\em tag} & \-The message tag (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-T\-A\-G). \\
\hline
\mbox{\tt in}  & {\em comm} & \-The shared communicator. \\
\hline
\mbox{\tt out}  & {\em status} & \-The message status. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-T\-M\-P\-I\-\_\-\-S\-U\-C\-C\-E\-S\-S on success, \-T\-M\-P\-I\-\_\-\-F\-A\-I\-L\-U\-R\-E on failure. 
\end{DoxyReturn}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c_ae606d72cbc14de10ac3a43ecb3d6a471_cgraph}
\end{center}
\end{figure}


\hypertarget{p2p__send__recv_8c_a8c363c0e29a4b16eaafebcf91c212aa5}{\index{p2p\-\_\-send\-\_\-recv.\-c@{p2p\-\_\-send\-\_\-recv.\-c}!t\-M\-P\-I\-\_\-\-Send@{t\-M\-P\-I\-\_\-\-Send}}
\index{t\-M\-P\-I\-\_\-\-Send@{t\-M\-P\-I\-\_\-\-Send}!p2p_send_recv.c@{p2p\-\_\-send\-\_\-recv.\-c}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Send}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf t\-M\-P\-I\-\_\-\-Send} (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{buf, }
\item[{int}]{count, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{datatype, }
\item[{int}]{dest, }
\item[{int}]{tag, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Comm}}]{comm}
\end{DoxyParamCaption}
)}}\label{p2p__send__recv_8c_a8c363c0e29a4b16eaafebcf91c212aa5}
\-Send message; blocks until buf is reusable.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt in}  & {\em buf} & \-The buffer with data to send. \\
\hline
\mbox{\tt in}  & {\em count} & \-The number of items to send. \\
\hline
\mbox{\tt in}  & {\em datatype} & \-The data type of the items in buf. \\
\hline
\mbox{\tt in}  & {\em dest} & \-The rank of the destination thread. \\
\hline
\mbox{\tt in}  & {\em tag} & \-The message tag. \\
\hline
\mbox{\tt in}  & {\em comm} & \-The shared communicator. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-T\-M\-P\-I\-\_\-\-S\-U\-C\-C\-E\-S\-S on success, \-T\-M\-P\-I\-\_\-\-F\-A\-I\-L\-U\-R\-E on failure. 
\end{DoxyReturn}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c_a8c363c0e29a4b16eaafebcf91c212aa5_cgraph}
\end{center}
\end{figure}


\hypertarget{p2p__send__recv_8c_a7f9c95e26e0a84bf4e8abb9019607291}{\index{p2p\-\_\-send\-\_\-recv.\-c@{p2p\-\_\-send\-\_\-recv.\-c}!t\-M\-P\-I\-\_\-\-Sendrecv@{t\-M\-P\-I\-\_\-\-Sendrecv}}
\index{t\-M\-P\-I\-\_\-\-Sendrecv@{t\-M\-P\-I\-\_\-\-Sendrecv}!p2p_send_recv.c@{p2p\-\_\-send\-\_\-recv.\-c}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Sendrecv}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf t\-M\-P\-I\-\_\-\-Sendrecv} (
\begin{DoxyParamCaption}
\item[{{\bf void} $\ast$}]{sendbuf, }
\item[{int}]{sendcount, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{sendtype, }
\item[{int}]{dest, }
\item[{int}]{sendtag, }
\item[{{\bf void} $\ast$}]{recvbuf, }
\item[{int}]{recvcount, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Datatype}}]{recvtype, }
\item[{int}]{source, }
\item[{int}]{recvtag, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Comm}}]{comm, }
\item[{{\bf t\-M\-P\-I\-\_\-\-Status} $\ast$}]{status}
\end{DoxyParamCaption}
)}}\label{p2p__send__recv_8c_a7f9c95e26e0a84bf4e8abb9019607291}
\-Send \& receive message at the same time.

\-Blocks until recvbuf is filled, and sendbuf is ready for reuse.


\begin{DoxyParams}[1]{\-Parameters}
\mbox{\tt in}  & {\em sendbuf} & \-The buffer with data to send. \\
\hline
\mbox{\tt in}  & {\em sendcount} & \-The number of items to send. \\
\hline
\mbox{\tt in}  & {\em sendtype} & \-The data type of the items in send buf. \\
\hline
\mbox{\tt in}  & {\em dest} & \-The rank of the destination thread. \\
\hline
\mbox{\tt in}  & {\em sendtag} & \-The send message tag. \\
\hline
\mbox{\tt out}  & {\em recvbuf} & \-The buffer for data to receive. \\
\hline
\mbox{\tt in}  & {\em recvcount} & \-The maximum number of items to receive. \\
\hline
\mbox{\tt in}  & {\em recvtype} & \-The data type of the items in recvbuf. \\
\hline
\mbox{\tt in}  & {\em source} & \-The rank of the source thread (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-S\-O\-U\-R\-C\-E). \\
\hline
\mbox{\tt in}  & {\em recvtag} & \-The recveive message tag (or \-T\-M\-P\-I\-\_\-\-A\-N\-Y\-\_\-\-T\-A\-G). \\
\hline
\mbox{\tt in}  & {\em comm} & \-The shared communicator. \\
\hline
\mbox{\tt out}  & {\em status} & \-The received message status. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-T\-M\-P\-I\-\_\-\-S\-U\-C\-C\-E\-S\-S on success, \-T\-M\-P\-I\-\_\-\-F\-A\-I\-L\-U\-R\-E on failure. 
\end{DoxyReturn}


\-Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{p2p__send__recv_8c_a7f9c95e26e0a84bf4e8abb9019607291_cgraph}
\end{center}
\end{figure}


