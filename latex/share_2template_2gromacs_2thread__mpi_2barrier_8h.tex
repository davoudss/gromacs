\hypertarget{share_2template_2gromacs_2thread__mpi_2barrier_8h}{\section{share/template/gromacs/thread\-\_\-mpi/barrier.h \-File \-Reference}
\label{share_2template_2gromacs_2thread__mpi_2barrier_8h}\index{share/template/gromacs/thread\-\_\-mpi/barrier.\-h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}}
}
{\ttfamily \#include \char`\"{}visibility.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}wait.\-h\char`\"{}}\*
\-Include dependency graph for barrier.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{share_2template_2gromacs_2thread__mpi_2barrier_8h__incl}
\end{center}
\end{figure}
\-This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{share_2template_2gromacs_2thread__mpi_2barrier_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{\-Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtMPI__Barrier__t}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{share_2template_2gromacs_2thread__mpi_2barrier_8h_a5382e5fbe45a25131d856efbc5461016}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N}(barrier)~((barrier)-\/$>$threshold)
\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structtMPI__Barrier__t}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} \hyperlink{share_2template_2gromacs_2thread__mpi_2barrier_8h_ad9129a8593aa6d33f811fab96b661ac6}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{share_2template_2gromacs_2thread__mpi_2visibility_8h_a1b2991140928309c56dcbe825bffb97e}{\-T\-M\-P\-I\-\_\-\-E\-X\-P\-O\-R\-T} \hyperlink{nbnxn__kernel__simd__4xn__outer_8h_a8dc3f4a797ed992dff49d2fa3477eee8}{void} \hyperlink{share_2template_2gromacs_2thread__mpi_2barrier_8h_a7419cb03498621d5c90a21757e19a6b7}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init} (\hyperlink{structtMPI__Barrier__t}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} $\ast$barrier, int count)
\item 
\hyperlink{share_2template_2gromacs_2thread__mpi_2visibility_8h_a1b2991140928309c56dcbe825bffb97e}{\-T\-M\-P\-I\-\_\-\-E\-X\-P\-O\-R\-T} int \hyperlink{share_2template_2gromacs_2thread__mpi_2barrier_8h_abe27af61e5ea1b93c21218c10ffb7d15}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait} (\hyperlink{structtMPI__Barrier__t}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} $\ast$barrier)
\end{DoxyCompactItemize}


\subsection{\-Define \-Documentation}
\hypertarget{share_2template_2gromacs_2thread__mpi_2barrier_8h_a5382e5fbe45a25131d856efbc5461016}{\index{share/template/gromacs/thread\-\_\-mpi/barrier.\-h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}!t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N}}
\index{t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N}!share/template/gromacs/thread_mpi/barrier.h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N}]{\setlength{\rightskip}{0pt plus 5cm}\#define {\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-\-N}(
\begin{DoxyParamCaption}
\item[{}]{barrier}
\end{DoxyParamCaption}
)~((barrier)-\/$>$threshold)}}\label{share_2template_2gromacs_2thread__mpi_2barrier_8h_a5382e5fbe45a25131d856efbc5461016}


\subsection{\-Typedef \-Documentation}
\hypertarget{share_2template_2gromacs_2thread__mpi_2barrier_8h_ad9129a8593aa6d33f811fab96b661ac6}{\index{share/template/gromacs/thread\-\_\-mpi/barrier.\-h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}!t\-M\-P\-I\-\_\-\-Barrier\-\_\-t@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}}
\index{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}!share/template/gromacs/thread_mpi/barrier.h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} {\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-t}}}\label{share_2template_2gromacs_2thread__mpi_2barrier_8h_ad9129a8593aa6d33f811fab96b661ac6}
\-Fast (possibly busy-\/wait-\/based) barrier type

\-This barrier has the same functionality as the standard \hyperlink{structtMPI__Thread__barrier__t}{t\-M\-P\-I\-\_\-\-Thread\-\_\-barrier\-\_\-t}, but since it is based on spinlocks that yield to the scheduler in case of waiting, it provides faster synchronization at the cost of busy-\/waiting, while still behaving relatively nicely to other processes/threads. \-This is therefore the preferred type of barrier for when waits are expected to be reasonably short.

\-Variables of this type should be initialized by calling \hyperlink{include_2thread__mpi_2barrier_8h_a7419cb03498621d5c90a21757e19a6b7}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init()} to set the number of threads that should be synchronized.

\begin{DoxySeeAlso}{\-See also}

\begin{DoxyItemize}
\item \hyperlink{barrier_8c_a9bdf13b66cebb1dae0ff11c79f035fa8}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init}
\item \hyperlink{barrier_8c_a216a5bf52bce7f13bc56c7c02729fd3a}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait} 
\end{DoxyItemize}
\end{DoxySeeAlso}


\subsection{\-Function \-Documentation}
\hypertarget{share_2template_2gromacs_2thread__mpi_2barrier_8h_a7419cb03498621d5c90a21757e19a6b7}{\index{share/template/gromacs/thread\-\_\-mpi/barrier.\-h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}!t\-M\-P\-I\-\_\-\-Barrier\-\_\-init@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init}}
\index{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init}!share/template/gromacs/thread_mpi/barrier.h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Barrier\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-T\-M\-P\-I\-\_\-\-E\-X\-P\-O\-R\-T} {\bf void} {\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-init} (
\begin{DoxyParamCaption}
\item[{{\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} $\ast$}]{barrier, }
\item[{int}]{count}
\end{DoxyParamCaption}
)}}\label{share_2template_2gromacs_2thread__mpi_2barrier_8h_a7419cb03498621d5c90a21757e19a6b7}
\-Initialize barrier


\begin{DoxyParams}{\-Parameters}
{\em barrier} & \-Pointer to \-\_\-spinlock\-\_\- barrier. \-Note that this is not the same datatype as the full, thread based, barrier. \\
\hline
{\em count} & \-Number of threads to synchronize. \-All threads will be released after {\itshape count\/} calls to \hyperlink{include_2thread__mpi_2barrier_8h_abe27af61e5ea1b93c21218c10ffb7d15}{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait()}. \\
\hline
\end{DoxyParams}
\hypertarget{share_2template_2gromacs_2thread__mpi_2barrier_8h_abe27af61e5ea1b93c21218c10ffb7d15}{\index{share/template/gromacs/thread\-\_\-mpi/barrier.\-h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}!t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait}}
\index{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait@{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait}!share/template/gromacs/thread_mpi/barrier.h@{share/template/gromacs/thread\-\_\-mpi/barrier.\-h}}
\subsubsection[{t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-T\-M\-P\-I\-\_\-\-E\-X\-P\-O\-R\-T} int {\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-wait} (
\begin{DoxyParamCaption}
\item[{{\bf t\-M\-P\-I\-\_\-\-Barrier\-\_\-t} $\ast$}]{barrier}
\end{DoxyParamCaption}
)}}\label{share_2template_2gromacs_2thread__mpi_2barrier_8h_abe27af61e5ea1b93c21218c10ffb7d15}
\-Perform yielding, busy-\/waiting barrier synchronization

\-This function blocks until it has been called \-N times, where \-N is the count value the barrier was initialized with. \-After \-N total calls all threads return. \-The barrier automatically cycles, and thus requires another \-N calls to unblock another time.


\begin{DoxyParams}{\-Parameters}
{\em barrier} & \-Pointer to previously created barrier.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-The last thread returns -\/1, all the others 0. 
\end{DoxyReturn}
