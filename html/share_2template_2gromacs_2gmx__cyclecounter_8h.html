<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: share/template/gromacs/gmx_cyclecounter.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">share/template/gromacs/gmx_cyclecounter.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2gmx__cyclecounter_8h__dep__incl.png" border="0" usemap="#share_2template_2gromacs_2gmx__cyclecounter_8hdep" alt=""/></div>
<map name="share_2template_2gromacs_2gmx__cyclecounter_8hdep" id="share_2template_2gromacs_2gmx__cyclecounter_8hdep">
<area shape="rect" id="node3" href="gmx__cyclecounter_8c.html" title="src/gmxlib/gmx_cyclecounter.c" alt="" coords="5,83,208,112"/><area shape="rect" id="node5" href="gmx__wallcycle_8c.html" title="src/mdlib/gmx_wallcycle.c" alt="" coords="232,83,408,112"/><area shape="rect" id="node7" href="nbnxn__internal_8h.html" title="src/mdlib/nbnxn_internal.h" alt="" coords="432,83,605,112"/><area shape="rect" id="node11" href="nbnxn__search_8c.html" title="src/mdlib/nbnxn_search.c" alt="" coords="557,160,728,189"/><area shape="rect" id="node14" href="pme_8c.html" title="src/mdlib/pme.c" alt="" coords="680,83,795,112"/><area shape="rect" id="node16" href="pull__rotation_8c.html" title="src/mdlib/pull_rotation.c" alt="" coords="819,83,979,112"/><area shape="rect" id="node9" href="nbnxn__atomdata_8c.html" title="src/mdlib/nbnxn_atomdata.c" alt="" coords="347,160,533,189"/></map>
</div>
</div>
<p><a href="share_2template_2gromacs_2gmx__cyclecounter_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#a7b04e633389542df9f5535b05b873baa">gmx_cycles_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Integer-like datatype for cycle counter values.  <a href="#a7b04e633389542df9f5535b05b873baa"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#af36c6166d37379804e1da2ae5c57f862">gmx_cycles_have_counter</a> (<a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if high-resolution cycle counters are available.  <a href="#af36c6166d37379804e1da2ae5c57f862"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2gmx__cyclecounter_8h.html#a7b04e633389542df9f5535b05b873baa">gmx_cycles_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00">gmx_cycles_read</a> (<a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read CPU cycle counter.  <a href="#a44eb37a6a439c565976b7c14c2bdae00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#a15e94a5a32400864b027b6d54c7963e7">gmx_cycles_calibrate</a> (double sampletime)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate number of seconds per cycle tick on host.  <a href="#a15e94a5a32400864b027b6d54c7963e7"></a><br/></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a7b04e633389542df9f5535b05b873baa"></a><!-- doxytag: member="gmx_cyclecounter.h::gmx_cycles_t" ref="a7b04e633389542df9f5535b05b873baa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef long <a class="el" href="include_2gmx__cyclecounter_8h.html#a7b04e633389542df9f5535b05b873baa">gmx_cycles_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Integer-like datatype for cycle counter values. </p>
<p>Depending on your system this will usually be something like long long, or a special cycle datatype from the system header files. It is NOT necessarily real processor cycles - many systems count in nanoseconds or a special external time register at fixed frequency (not the CPU freq.)</p>
<p>You can subtract or add gmx_cycle_t types just as normal integers, and if you run the calibration routine you can also multiply it with a factor to translate the cycle data to seconds. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a15e94a5a32400864b027b6d54c7963e7"></a><!-- doxytag: member="gmx_cyclecounter.h::gmx_cycles_calibrate" ref="a15e94a5a32400864b027b6d54c7963e7" args="(double sampletime)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="gmx__cyclecounter_8c.html#a15e94a5a32400864b027b6d54c7963e7">gmx_cycles_calibrate</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sampletime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate number of seconds per cycle tick on host. </p>
<p>This routine runs a timer loop to calibrate the number of seconds per the units returned from gmx_cycles_difference()</p>
<p>To calculate the time used, call <a class="el" href="include_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00" title="Read CPU cycle counter.">gmx_cycles_read()</a> twice, and then use this routine to calculate the difference as a double precision floating-point number.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sampletime</td><td>Minimum number of seconds to sample. One second should give you a reasonably accurate calibration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of seconds per cycle unit. If it is not possible to calculate on this system (for whatever reason) the return value will be -1, so check that it is positive before using it.</dd></dl>
<p>This routine runs a timer loop to calibrate the number of seconds per the units returned fro <a class="el" href="include_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00" title="Read CPU cycle counter.">gmx_cycles_read()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sampletime</td><td>Minimum real sample time. It takes some trial-and-error to find the correct delay loop size, so the total runtime of this routine is about twice this time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of seconds per cycle unit. If it is not possible to calculate on this system (for whatever reason) the return value will be -1, so check that it is positive before using it. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2gmx__cyclecounter_8h_a15e94a5a32400864b027b6d54c7963e7_cgraph.png" border="0" usemap="#share_2template_2gromacs_2gmx__cyclecounter_8h_a15e94a5a32400864b027b6d54c7963e7_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2gmx__cyclecounter_8h_a15e94a5a32400864b027b6d54c7963e7_cgraph" id="share_2template_2gromacs_2gmx__cyclecounter_8h_a15e94a5a32400864b027b6d54c7963e7_cgraph">
<area shape="rect" id="node3" href="include_2gmx__cyclecounter_8h.html#af36c6166d37379804e1da2ae5c57f862" title="Check if high&#45;resolution cycle counters are available." alt="" coords="204,5,380,35"/><area shape="rect" id="node5" href="include_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00" title="Read CPU cycle counter." alt="" coords="231,59,353,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af36c6166d37379804e1da2ae5c57f862"></a><!-- doxytag: member="gmx_cyclecounter.h::gmx_cycles_have_counter" ref="af36c6166d37379804e1da2ae5c57f862" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#af36c6166d37379804e1da2ae5c57f862">gmx_cycles_have_counter</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if high-resolution cycle counters are available. </p>
<p>Not all architectures provide any way to read timestep counters in the CPU, and on some it is broken. Although we refer to it as cycle counters, it is not necessarily given in units of cycles.</p>
<p>If you notice that system is missing, implement support for it, find out how to detect the system during preprocessing, and send us a patch.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if cycle counters are available, 0 if not.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This functions not need to be in the header for performance reasons, but it is very important that we get exactly the same detection as for <a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00" title="Read CPU cycle counter.">gmx_cycles_read()</a> routines. If you compile the library with one compiler, and then use a different one when later linking to the library it might happen that the library supports cyclecounters but not the headers, or vice versa. </dd></dl>

</div>
</div>
<a class="anchor" id="a44eb37a6a439c565976b7c14c2bdae00"></a><!-- doxytag: member="gmx_cyclecounter.h::gmx_cycles_read" ref="a44eb37a6a439c565976b7c14c2bdae00" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="include_2gmx__cyclecounter_8h.html#a7b04e633389542df9f5535b05b873baa">gmx_cycles_t</a> <a class="el" href="share_2template_2gromacs_2gmx__cyclecounter_8h.html#a44eb37a6a439c565976b7c14c2bdae00">gmx_cycles_read</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read CPU cycle counter. </p>
<p>This routine returns an abstract datatype containing a cycle counter timestamp.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Opaque data corresponding to a cycle reading.</dd></dl>
<p>Please note that on most systems it takes several cycles to read and return the cycle counters. If you are measuring small intervals, you can compensate for this time by calling the routine twice and calculating what the difference is. Subtract this from your other measurements to get an accurate result.</p>
<p>Use gmx_cycles_difference() to get a real number corresponding to the difference between two gmx_cycles_t values returned from this routine. </p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 20 2014 17:22:22 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
