<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: share/template/gromacs/gmx_cpuid.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">share/template/gromacs/gmx_cpuid.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="share_2template_2gromacs_2gmx__cpuid_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * This file is part of the GROMACS molecular simulation package.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (c) 2012,2013, by the GROMACS development team, led by</span>
<a name="l00005"></a>00005 <span class="comment"> * David van der Spoel, Berk Hess, Erik Lindahl, and including many</span>
<a name="l00006"></a>00006 <span class="comment"> * others, as listed in the AUTHORS file in the top-level source</span>
<a name="l00007"></a>00007 <span class="comment"> * directory and at http://www.gromacs.org.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * GROMACS is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment"> * modify it under the terms of the GNU Lesser General Public License</span>
<a name="l00011"></a>00011 <span class="comment"> * as published by the Free Software Foundation; either version 2.1</span>
<a name="l00012"></a>00012 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * GROMACS is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00020"></a>00020 <span class="comment"> * License along with GROMACS; if not, see</span>
<a name="l00021"></a>00021 <span class="comment"> * http://www.gnu.org/licenses, or write to the Free Software Foundation,</span>
<a name="l00022"></a>00022 <span class="comment"> * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA.</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> * If you want to redistribute modifications to GROMACS, please</span>
<a name="l00025"></a>00025 <span class="comment"> * consider that scientific software is very special. Version</span>
<a name="l00026"></a>00026 <span class="comment"> * control is crucial - bugs must be traceable. We will be happy to</span>
<a name="l00027"></a>00027 <span class="comment"> * consider code for inclusion in the official distribution, but</span>
<a name="l00028"></a>00028 <span class="comment"> * derived work must not be called official GROMACS. Details are found</span>
<a name="l00029"></a>00029 <span class="comment"> * in the README &amp; COPYING files - if they are missing, get the</span>
<a name="l00030"></a>00030 <span class="comment"> * official version at http://www.gromacs.org.</span>
<a name="l00031"></a>00031 <span class="comment"> *</span>
<a name="l00032"></a>00032 <span class="comment"> * To help us fund GROMACS development, we humbly ask that you cite</span>
<a name="l00033"></a>00033 <span class="comment"> * the research papers on the package. Check out http://www.gromacs.org.</span>
<a name="l00034"></a>00034 <span class="comment"> */</span>
<a name="l00035"></a>00035 <span class="preprocessor">#ifndef GMX_CPUID_H_</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define GMX_CPUID_H_</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="share_2template_2gromacs_2visibility_8h.html">visibility.h</a>&quot;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00044"></a>00044 <span class="preprocessor">#endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>} <span class="comment">/* fixes auto-indentation problems */</span>
<a name="l00047"></a>00047 <span class="preprocessor">#endif</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">/* Currently identifiable CPU Vendors */</span>
<a name="l00051"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4">00051</a> <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4">gmx_cpuid_vendor</a>
<a name="l00052"></a>00052 {
<a name="l00053"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4adede64117d1a863eb0e6626682523481">00053</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4adede64117d1a863eb0e6626682523481">GMX_CPUID_VENDOR_CANNOTDETECT</a>,   <span class="comment">/* Should only be used if something fails */</span>
<a name="l00054"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4ae6347aa8f868b7b27f3702e4365f4434">00054</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4ae6347aa8f868b7b27f3702e4365f4434">GMX_CPUID_VENDOR_UNKNOWN</a>,
<a name="l00055"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4ac16228d154c002c59cae5b250027c196">00055</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4ac16228d154c002c59cae5b250027c196">GMX_CPUID_VENDOR_INTEL</a>,
<a name="l00056"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4af2598b9853955a68c69469f295408837">00056</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4af2598b9853955a68c69469f295408837">GMX_CPUID_VENDOR_AMD</a>,
<a name="l00057"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4abbc719956f55cc5d76d18f992b19cc74">00057</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4abbc719956f55cc5d76d18f992b19cc74">GMX_CPUID_NVENDORS</a>
<a name="l00058"></a>00058 };
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">/* CPU feature/property list, to be used as indices into the feature array of the</span>
<a name="l00062"></a>00062 <span class="comment"> * gmxcpuid_t data structure.</span>
<a name="l00063"></a>00063 <span class="comment"> *</span>
<a name="l00064"></a>00064 <span class="comment"> * To facilitate looking things up, we keep this list alphabetical.</span>
<a name="l00065"></a>00065 <span class="comment"> * The list is NOT exhaustive - we have basically added stuff that might be</span>
<a name="l00066"></a>00066 <span class="comment"> * useful in an application like Gromacs.</span>
<a name="l00067"></a>00067 <span class="comment"> *</span>
<a name="l00068"></a>00068 <span class="comment"> * AMD and Intel tend to share most architectural elements, and even if the</span>
<a name="l00069"></a>00069 <span class="comment"> * flags might have to be detected in different ways (different cpuid registers),</span>
<a name="l00070"></a>00070 <span class="comment"> * once the flag is present the functions should be identical. Unfortunately the</span>
<a name="l00071"></a>00071 <span class="comment"> * trend right now (2012) seems to be that they are diverging. This means that</span>
<a name="l00072"></a>00072 <span class="comment"> * we need to use specific flags to the compiler to maximize performance, and</span>
<a name="l00073"></a>00073 <span class="comment"> * then the binaries might not be portable between Intel and AMD as they were</span>
<a name="l00074"></a>00074 <span class="comment"> * before when we only needed to check for SSE and/or SSE2 support in Gromacs.</span>
<a name="l00075"></a>00075 <span class="comment"> */</span>
<a name="l00076"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347">00076</a> <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347">gmx_cpuid_feature</a>
<a name="l00077"></a>00077 {
<a name="l00078"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ab8683e5481ebcd2503d8d3037901245a">00078</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ab8683e5481ebcd2503d8d3037901245a">GMX_CPUID_FEATURE_CANNOTDETECT</a>,      <span class="comment">/* Flag set if we could not detect on this CPU  */</span>
<a name="l00079"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2e881071c5839b9ce574e26acb3bea5b">00079</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2e881071c5839b9ce574e26acb3bea5b">GMX_CPUID_FEATURE_X86_AES</a>,           <span class="comment">/* x86 advanced encryption standard accel.      */</span>
<a name="l00080"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3deadacf0b3cd0d1b654c84f1ce207b4">00080</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3deadacf0b3cd0d1b654c84f1ce207b4">GMX_CPUID_FEATURE_X86_APIC</a>,          <span class="comment">/* APIC support                                 */</span>
<a name="l00081"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a9340dbb45f203e40694f15a9773e4c5e">00081</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a9340dbb45f203e40694f15a9773e4c5e">GMX_CPUID_FEATURE_X86_AVX</a>,           <span class="comment">/* Advanced vector extensions                   */</span>
<a name="l00082"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a5814949bf214d21b91352e5af84795fe">00082</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a5814949bf214d21b91352e5af84795fe">GMX_CPUID_FEATURE_X86_AVX2</a>,          <span class="comment">/* AVX2 including gather support (not used yet) */</span>
<a name="l00083"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ae3e13ffcfc82e3c3cf6d05b297a6cae4">00083</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ae3e13ffcfc82e3c3cf6d05b297a6cae4">GMX_CPUID_FEATURE_X86_CLFSH</a>,         <span class="comment">/* Supports CLFLUSH instruction                 */</span>
<a name="l00084"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a94a01f35d78df5f83eaf5b91c851b634">00084</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a94a01f35d78df5f83eaf5b91c851b634">GMX_CPUID_FEATURE_X86_CMOV</a>,          <span class="comment">/* Conditional move insn support                */</span>
<a name="l00085"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac144abcb1f5034559fee968cc2144eee">00085</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac144abcb1f5034559fee968cc2144eee">GMX_CPUID_FEATURE_X86_CX8</a>,           <span class="comment">/* Supports CMPXCHG8B (8-byte compare-exchange) */</span>
<a name="l00086"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ab825a598daeec38badd559743b63c034">00086</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ab825a598daeec38badd559743b63c034">GMX_CPUID_FEATURE_X86_CX16</a>,          <span class="comment">/* Supports CMPXCHG16B (16-byte compare-exchg)  */</span>
<a name="l00087"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3a2fe738c1b4fc66de10252db5fe00cc">00087</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3a2fe738c1b4fc66de10252db5fe00cc">GMX_CPUID_FEATURE_X86_F16C</a>,          <span class="comment">/* Supports 16-bit FP conversion instructions   */</span>
<a name="l00088"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aaa0e35d6e8f2ee8e5d07155cc7ef7761">00088</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aaa0e35d6e8f2ee8e5d07155cc7ef7761">GMX_CPUID_FEATURE_X86_FMA</a>,           <span class="comment">/* Fused-multiply add support (mainly for AVX)  */</span>
<a name="l00089"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a36765358457ae37ada8c2ae6e469d976">00089</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a36765358457ae37ada8c2ae6e469d976">GMX_CPUID_FEATURE_X86_FMA4</a>,          <span class="comment">/* 4-operand FMA, only on AMD for now           */</span>
<a name="l00090"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a4d9c70e939259a203bd1666a35bcfd0f">00090</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a4d9c70e939259a203bd1666a35bcfd0f">GMX_CPUID_FEATURE_X86_HTT</a>,           <span class="comment">/* Hyper-Threading supported                    */</span>
<a name="l00091"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3c3df5ab31565a678b22f8cb35363dd4">00091</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3c3df5ab31565a678b22f8cb35363dd4">GMX_CPUID_FEATURE_X86_LAHF_LM</a>,       <span class="comment">/* LAHF/SAHF support in 64 bits                 */</span>
<a name="l00092"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aedcf2b089b47c6d54e09aaccdbfcda89">00092</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aedcf2b089b47c6d54e09aaccdbfcda89">GMX_CPUID_FEATURE_X86_MISALIGNSSE</a>,   <span class="comment">/* Support for misaligned SSE data instructions */</span>
<a name="l00093"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a02713f6de3f1e36a871181df191fa072">00093</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a02713f6de3f1e36a871181df191fa072">GMX_CPUID_FEATURE_X86_MMX</a>,           <span class="comment">/* MMX registers and instructions               */</span>
<a name="l00094"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3df0be71e03c52480929b360c022f1c1">00094</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3df0be71e03c52480929b360c022f1c1">GMX_CPUID_FEATURE_X86_MSR</a>,           <span class="comment">/* Supports Intel model-specific-registers      */</span>
<a name="l00095"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a75c98f6264a06c87cccbe46dcedab5bd">00095</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a75c98f6264a06c87cccbe46dcedab5bd">GMX_CPUID_FEATURE_X86_NONSTOP_TSC</a>,   <span class="comment">/* Invariant TSC (constant rate in ACPI states) */</span>
<a name="l00096"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aeb9e418f3dbe48906e05ea1e61deea1f">00096</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aeb9e418f3dbe48906e05ea1e61deea1f">GMX_CPUID_FEATURE_X86_PCID</a>,          <span class="comment">/* Process context identifier support           */</span>
<a name="l00097"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a250dbf0919f60bc2ccc060cc2520b9d0">00097</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a250dbf0919f60bc2ccc060cc2520b9d0">GMX_CPUID_FEATURE_X86_PCLMULDQ</a>,      <span class="comment">/* Carry-less 64-bit multiplication supported   */</span>
<a name="l00098"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac72fac62edfde2b8a4d95b70dcbd6bba">00098</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac72fac62edfde2b8a4d95b70dcbd6bba">GMX_CPUID_FEATURE_X86_PDCM</a>,          <span class="comment">/* Perfmon and Debug Capability                 */</span>
<a name="l00099"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aa17385820cf958a68e578036fdf1bb8b">00099</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347aa17385820cf958a68e578036fdf1bb8b">GMX_CPUID_FEATURE_X86_PDPE1GB</a>,       <span class="comment">/* Support for 1GB pages                        */</span>
<a name="l00100"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347afcb869eb3385d76269ec2e8accee9231">00100</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347afcb869eb3385d76269ec2e8accee9231">GMX_CPUID_FEATURE_X86_POPCNT</a>,        <span class="comment">/* Supports the POPCNT (population count) insn  */</span>
<a name="l00101"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a44bde80134d8ca917b7689977fefca66">00101</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a44bde80134d8ca917b7689977fefca66">GMX_CPUID_FEATURE_X86_PSE</a>,           <span class="comment">/* Supports 4MB-pages (page size extension)     */</span>
<a name="l00102"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ad68eb4baf00e04d113c912157e3ff07e">00102</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ad68eb4baf00e04d113c912157e3ff07e">GMX_CPUID_FEATURE_X86_RDRND</a>,         <span class="comment">/* RDRAND high-quality hardware random numbers  */</span>
<a name="l00103"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a9557921053f9153b2fa3aed3e4b8e1b9">00103</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a9557921053f9153b2fa3aed3e4b8e1b9">GMX_CPUID_FEATURE_X86_RDTSCP</a>,        <span class="comment">/* Serializing rdtscp instruction available     */</span>
<a name="l00104"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a7153669bbcf33b859b392e593d0fac1e">00104</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a7153669bbcf33b859b392e593d0fac1e">GMX_CPUID_FEATURE_X86_SSE2</a>,          <span class="comment">/* SSE 2                                        */</span>
<a name="l00105"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3e255330966edeacda5c48117c914f27">00105</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a3e255330966edeacda5c48117c914f27">GMX_CPUID_FEATURE_X86_SSE3</a>,          <span class="comment">/* SSE 3                                        */</span>
<a name="l00106"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a1fd770541f4c3d23d21ec75c67169e58">00106</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a1fd770541f4c3d23d21ec75c67169e58">GMX_CPUID_FEATURE_X86_SSE4A</a>,         <span class="comment">/* SSE 4A                                       */</span>
<a name="l00107"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac1d01a28270eba5a02e915433d6e17db">00107</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347ac1d01a28270eba5a02e915433d6e17db">GMX_CPUID_FEATURE_X86_SSE4_1</a>,        <span class="comment">/* SSE 4.1                                      */</span>
<a name="l00108"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2c78747e239b2f2b51bbd42912f2eee1">00108</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2c78747e239b2f2b51bbd42912f2eee1">GMX_CPUID_FEATURE_X86_SSE4_2</a>,        <span class="comment">/* SSE 4.2                                      */</span>
<a name="l00109"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2ce03a28bfb23dd2cf40b20c731fda8c">00109</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a2ce03a28bfb23dd2cf40b20c731fda8c">GMX_CPUID_FEATURE_X86_SSSE3</a>,         <span class="comment">/* Supplemental SSE3                            */</span>
<a name="l00110"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a788e5ff3a008f9830bf3bf8177c08c43">00110</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a788e5ff3a008f9830bf3bf8177c08c43">GMX_CPUID_FEATURE_X86_TDT</a>,           <span class="comment">/* TSC deadline timer                           */</span>
<a name="l00111"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347afbe311ce70054576966235cfe3d0ddfe">00111</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347afbe311ce70054576966235cfe3d0ddfe">GMX_CPUID_FEATURE_X86_X2APIC</a>,        <span class="comment">/* Extended xAPIC Support                       */</span>
<a name="l00112"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a680743f7dcd10ffdd86c7e4db87eada6">00112</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a680743f7dcd10ffdd86c7e4db87eada6">GMX_CPUID_FEATURE_X86_XOP</a>,           <span class="comment">/* AMD extended instructions, only AMD for now  */</span>
<a name="l00113"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a47c3647340278c0916fb392da173e542">00113</a>     <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a47c3647340278c0916fb392da173e542">GMX_CPUID_NFEATURES</a>
<a name="l00114"></a>00114 };
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">/* Currently supported acceleration instruction sets, intrinsics or other similar combinations</span>
<a name="l00118"></a>00118 <span class="comment"> * in Gromacs. There is not always a 1-to-1 correspondence with feature flags; on some AMD</span>
<a name="l00119"></a>00119 <span class="comment"> * hardware we prefer to use 128bit AVX instructions (although 256-bit ones could be executed),</span>
<a name="l00120"></a>00120 <span class="comment"> * and we still haven&#39;t written the AVX2 kernels.</span>
<a name="l00121"></a>00121 <span class="comment"> */</span>
<a name="l00122"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2">00122</a> <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2">gmx_cpuid_acceleration</a>
<a name="l00123"></a>00123 {
<a name="l00124"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2aa11e02141be2f08b53f3d0677c3fca64">00124</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2aa11e02141be2f08b53f3d0677c3fca64">GMX_CPUID_ACCELERATION_CANNOTDETECT</a>,    <span class="comment">/* Should only be used if something fails */</span>
<a name="l00125"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a0c643b96dd17119eb2027cfd7ecbc505">00125</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a0c643b96dd17119eb2027cfd7ecbc505">GMX_CPUID_ACCELERATION_NONE</a>,
<a name="l00126"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a66d807a081570e07dc8d5e9f5a056d50">00126</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a66d807a081570e07dc8d5e9f5a056d50">GMX_CPUID_ACCELERATION_X86_SSE2</a>,
<a name="l00127"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2adcbed051285785b941d71e12786e1534">00127</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2adcbed051285785b941d71e12786e1534">GMX_CPUID_ACCELERATION_X86_SSE4_1</a>,
<a name="l00128"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a8714544a4ab7ce91ba2a493e25ce976a">00128</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a8714544a4ab7ce91ba2a493e25ce976a">GMX_CPUID_ACCELERATION_X86_AVX_128_FMA</a>,
<a name="l00129"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a6fceb69d71265f4e351e4ebc549e92d2">00129</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2a6fceb69d71265f4e351e4ebc549e92d2">GMX_CPUID_ACCELERATION_X86_AVX_256</a>,
<a name="l00130"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2af7672cc8ced99bd0c498867a2c12f538">00130</a>     <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2af7672cc8ced99bd0c498867a2c12f538">GMX_CPUID_NACCELERATIONS</a>
<a name="l00131"></a>00131 };
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="comment">/* Text strings corresponding to CPU vendors */</span>
<a name="l00134"></a>00134 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00135"></a>00135 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00136"></a>00136 <a class="code" href="include_2gmx__cpuid_8h.html#abf4b4ddad1872ced0c317cb3532c331e">gmx_cpuid_vendor_string</a>[<a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4abbc719956f55cc5d76d18f992b19cc74">GMX_CPUID_NVENDORS</a>];
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">/* Text strings for CPU feature indices */</span>
<a name="l00139"></a>00139 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00140"></a>00140 <a class="code" href="include_2gmx__cpuid_8h.html#a9e71a35be8222de4c28c4b052242ad9b">gmx_cpuid_feature_string</a>[<a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347a47c3647340278c0916fb392da173e542">GMX_CPUID_NFEATURES</a>];
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/* Text strings for Gromacs acceleration/instruction sets */</span>
<a name="l00143"></a>00143 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00144"></a>00144 <a class="code" href="include_2gmx__cpuid_8h.html#aea32dca45f752d4bccd65997e45ba0e7">gmx_cpuid_acceleration_string</a>[<a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2af7672cc8ced99bd0c498867a2c12f538">GMX_CPUID_NACCELERATIONS</a>];
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="comment">/* Abstract data type with CPU detection information. Set by gmx_cpuid_init(). */</span>
<a name="l00148"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#aca8ed5c31d10235eeec45dfd0c17408b">00148</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structgmx__cpuid.html">gmx_cpuid</a> *
<a name="l00149"></a>00149     <a class="code" href="include_2gmx__cpuid_8h.html#aca8ed5c31d10235eeec45dfd0c17408b">gmx_cpuid_t</a>;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 <span class="comment">/* Fill the data structure by using CPU detection instructions.</span>
<a name="l00153"></a>00153 <span class="comment"> * Return 0 on success, 1 if something bad happened.</span>
<a name="l00154"></a>00154 <span class="comment"> */</span>
<a name="l00155"></a>00155 <span class="keywordtype">int</span>
<a name="l00156"></a>00156 <a class="code" href="include_2gmx__cpuid_8h.html#ad5888bf1f966ede050ac7b61f53b2cc3">gmx_cpuid_init</a>              (gmx_cpuid_t *              cpuid);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="comment">/* Return the vendor id as enumerated type. Use gmx_cpuid_vendor_string[]</span>
<a name="l00160"></a>00160 <span class="comment"> * to get the corresponding text string.</span>
<a name="l00161"></a>00161 <span class="comment"> */</span>
<a name="l00162"></a>00162 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00163"></a>00163 <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4">gmx_cpuid_vendor</a>
<a name="l00164"></a>00164 <a class="code" href="include_2gmx__cpuid_8h.html#aebe7c31e0af516c77815cad730fad0e4">gmx_cpuid_vendor</a>            (gmx_cpuid_t                cpuid);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="comment">/* Return a constant pointer to the processor brand string. */</span>
<a name="l00168"></a>00168 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00169"></a>00169 <a class="code" href="include_2gmx__cpuid_8h.html#ac3fe3f5decae8c9ef9cd9244ad6b2b34">gmx_cpuid_brand</a>             (gmx_cpuid_t                cpuid);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/* Return processor family version. For a chip of version 1.2.3, this is 1 */</span>
<a name="l00173"></a>00173 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00174"></a>00174 <span class="keywordtype">int</span>
<a name="l00175"></a>00175 <a class="code" href="include_2gmx__cpuid_8h.html#acd72e97fcf67547376e4c542b13f982f">gmx_cpuid_family</a>            (gmx_cpuid_t                cpuid);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">/* Return processor model version, For a chip of version 1.2.3, this is 2. */</span>
<a name="l00178"></a>00178 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00179"></a>00179 <span class="keywordtype">int</span>
<a name="l00180"></a>00180 <a class="code" href="include_2gmx__cpuid_8h.html#a7f656a23599f974e658db71a33083651">gmx_cpuid_model</a>             (gmx_cpuid_t                cpuid);
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">/* Return processor stepping version, For a chip of version 1.2.3, this is 3. */</span>
<a name="l00183"></a>00183 <span class="keywordtype">int</span>
<a name="l00184"></a>00184 <a class="code" href="include_2gmx__cpuid_8h.html#a8c94a49ab54b31ef508f309e5ad6db0e">gmx_cpuid_stepping</a>          (gmx_cpuid_t                cpuid);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="comment">/* Check whether a particular CPUID feature is set.</span>
<a name="l00188"></a>00188 <span class="comment"> * Returns 0 if flag &quot;feature&quot; is not set, 1 if the flag is set. We cannot use</span>
<a name="l00189"></a>00189 <span class="comment"> * gmx_bool here since this file must be possible to compile without simple.h.</span>
<a name="l00190"></a>00190 <span class="comment"> */</span>
<a name="l00191"></a>00191 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00192"></a>00192 <span class="keywordtype">int</span>
<a name="l00193"></a>00193 <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347">gmx_cpuid_feature</a>           (gmx_cpuid_t                cpuid,
<a name="l00194"></a>00194                              <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#aad8211e7ee233fd7686b1138cc41a347">gmx_cpuid_feature</a>     <a class="code" href="structgmx__cpuid.html#a730ac422d394482fe70c57e1dab7684e">feature</a>);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">/* Return pointers to cpu topology information.</span>
<a name="l00198"></a>00198 <span class="comment"> *</span>
<a name="l00199"></a>00199 <span class="comment"> * Important: CPU topology requires more OS support than most other</span>
<a name="l00200"></a>00200 <span class="comment"> * functions in this file, including support for thread pinning to hardware.</span>
<a name="l00201"></a>00201 <span class="comment"> * This means it will not work on some platforms, including e.g. Mac OS X.</span>
<a name="l00202"></a>00202 <span class="comment"> * Thus, it is IMPERATIVE that you check the return value from this routine</span>
<a name="l00203"></a>00203 <span class="comment"> * before doing anything with the information. It is only if the return</span>
<a name="l00204"></a>00204 <span class="comment"> * value is zero that the data is valid.</span>
<a name="l00205"></a>00205 <span class="comment"> *</span>
<a name="l00206"></a>00206 <span class="comment"> * For the returned values we have:</span>
<a name="l00207"></a>00207 <span class="comment"> * - nprocessors         Total number of logical processors reported by OS</span>
<a name="l00208"></a>00208 <span class="comment"> * - npackages           Usually number of CPU sockets</span>
<a name="l00209"></a>00209 <span class="comment"> * - ncores_per_package  Number of cores in each package</span>
<a name="l00210"></a>00210 <span class="comment"> * - nhwthreads_per_core Number of hardware threads per core; 2 for hyperthreading.</span>
<a name="l00211"></a>00211 <span class="comment"> * - package_id          Array with the package index for each logical cpu</span>
<a name="l00212"></a>00212 <span class="comment"> * - core_id             Array with local core index for each logical cpu</span>
<a name="l00213"></a>00213 <span class="comment"> * - hwthread_id         Array with local hwthread index for each logical cpu</span>
<a name="l00214"></a>00214 <span class="comment"> * - locality_order      Array with logical cpu numbers, sorted in order</span>
<a name="l00215"></a>00215 <span class="comment"> *                       of physical and logical locality in the system.</span>
<a name="l00216"></a>00216 <span class="comment"> *</span>
<a name="l00217"></a>00217 <span class="comment"> * All arrays are of length nprocessors.</span>
<a name="l00218"></a>00218 <span class="comment"> */</span>
<a name="l00219"></a>00219 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00220"></a>00220 <span class="keywordtype">int</span>
<a name="l00221"></a>00221 <a class="code" href="include_2gmx__cpuid_8h.html#a0897b99941e1d7ac13bda490e88802bc">gmx_cpuid_topology</a>(gmx_cpuid_t        cpuid,
<a name="l00222"></a>00222                    <span class="keywordtype">int</span> *              nprocessors,
<a name="l00223"></a>00223                    <span class="keywordtype">int</span> *              <a class="code" href="structgmx__cpuid.html#a93ebc21ce5a96d0066df5c08ae3b8ebf">npackages</a>,
<a name="l00224"></a>00224                    <span class="keywordtype">int</span> *              <a class="code" href="structgmx__cpuid.html#a292bede43db4c30e15636dffe3816864">ncores_per_package</a>,
<a name="l00225"></a>00225                    <span class="keywordtype">int</span> *              <a class="code" href="structgmx__cpuid.html#a7fc326d32d51b7f8f9dfa89c49d1be2e">nhwthreads_per_core</a>,
<a name="l00226"></a>00226                    <span class="keyword">const</span> <span class="keywordtype">int</span> **       <a class="code" href="structgmx__cpuid.html#aa7adf6d90a81704fda5095bfe7a67e6c">package_id</a>,
<a name="l00227"></a>00227                    <span class="keyword">const</span> <span class="keywordtype">int</span> **       <a class="code" href="structgmx__cpuid.html#a2ef87d5793f6687739852b0a3203fbb1">core_id</a>,
<a name="l00228"></a>00228                    <span class="keyword">const</span> <span class="keywordtype">int</span> **       <a class="code" href="structgmx__cpuid.html#a9ceff2bee91a188addaa5700e41e12a7">hwthread_id</a>,
<a name="l00229"></a>00229                    <span class="keyword">const</span> <span class="keywordtype">int</span> **       <a class="code" href="structgmx__cpuid.html#abcce45f7b712d32568ea98805cd84292">locality_order</a>);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment">/* Enumerated values for x86 SMT enabled-status. Note that this does not refer</span>
<a name="l00232"></a>00232 <span class="comment"> * to Hyper-Threading support (that is the flag GMX_CPUID_FEATURE_X86_HTT), but</span>
<a name="l00233"></a>00233 <span class="comment"> * whether Hyper-Threading is _enabled_ and _used_ in bios right now.</span>
<a name="l00234"></a>00234 <span class="comment"> */</span>
<a name="l00235"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016">00235</a> <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016">gmx_cpuid_x86_smt</a>
<a name="l00236"></a>00236 {
<a name="l00237"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016aa0ed1bb3de9dab73f1fe37a8da473573">00237</a>     <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016aa0ed1bb3de9dab73f1fe37a8da473573">GMX_CPUID_X86_SMT_CANNOTDETECT</a>,
<a name="l00238"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016aa22b2519fdb2543dd3bf595adf35bb8d">00238</a>     <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016aa22b2519fdb2543dd3bf595adf35bb8d">GMX_CPUID_X86_SMT_DISABLED</a>,
<a name="l00239"></a><a class="code" href="share_2template_2gromacs_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016a63839cc82155520676f622b42d1731c1">00239</a>     <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016a63839cc82155520676f622b42d1731c1">GMX_CPUID_X86_SMT_ENABLED</a>
<a name="l00240"></a>00240 };
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="comment">/* Returns the status of x86 SMT support. IMPORTANT: There are non-zero</span>
<a name="l00243"></a>00243 <span class="comment"> * return values for this routine that still do not indicate supported and</span>
<a name="l00244"></a>00244 <span class="comment"> * enabled smt/Hyper-Threading. You need to carefully check the return value</span>
<a name="l00245"></a>00245 <span class="comment"> * against the enumerated type values to see what you are getting.</span>
<a name="l00246"></a>00246 <span class="comment"> *</span>
<a name="l00247"></a>00247 <span class="comment"> * Long-term, this functionality will move to a new hardware topology detection</span>
<a name="l00248"></a>00248 <span class="comment"> * layer, but that will require a lot of new code and a working interface to the</span>
<a name="l00249"></a>00249 <span class="comment"> * hwloc library. Surprisingly, there is no simple way to find out that</span>
<a name="l00250"></a>00250 <span class="comment"> * Hyper-Threading is actually turned on without fully enumerating and checking</span>
<a name="l00251"></a>00251 <span class="comment"> * all the cores, which we presently can only do on Linux. This means a couple</span>
<a name="l00252"></a>00252 <span class="comment"> * of things:</span>
<a name="l00253"></a>00253 <span class="comment"> *</span>
<a name="l00254"></a>00254 <span class="comment"> * 1) If you want to know whether your CPU _supports_ Hyper-Threading in the</span>
<a name="l00255"></a>00255 <span class="comment"> *    first place, check the GMX_CPUID_FEATURE_X86_HTT flag instead!</span>
<a name="l00256"></a>00256 <span class="comment"> * 2) There are several scenarios where this routine will say that it cannot</span>
<a name="l00257"></a>00257 <span class="comment"> *    detect whether SMT is enabled and used right now.</span>
<a name="l00258"></a>00258 <span class="comment"> * 3) If you need support on non-Linux x86, you have to write it :-)</span>
<a name="l00259"></a>00259 <span class="comment"> * 4) Don&#39;t invest too much efforts, since this will be replaced with</span>
<a name="l00260"></a>00260 <span class="comment"> *    full hardware topology detection in the future.</span>
<a name="l00261"></a>00261 <span class="comment"> * 5) Don&#39;t worry if the detection does not work. It is not a catastrophe, but</span>
<a name="l00262"></a>00262 <span class="comment"> *    but we get slightly better performance on x86 if we use Hyper-Threading</span>
<a name="l00263"></a>00263 <span class="comment"> *    cores in direct space, but not reciprocal space.</span>
<a name="l00264"></a>00264 <span class="comment"> *</span>
<a name="l00265"></a>00265 <span class="comment"> * Since this routine presently only supports Hyper-Threading we say X86_SMT</span>
<a name="l00266"></a>00266 <span class="comment"> * in order not to give the impression we can detect any SMT. We haven&#39;t</span>
<a name="l00267"></a>00267 <span class="comment"> * even tested the performance on other SMT implementations, so it is not</span>
<a name="l00268"></a>00268 <span class="comment"> * obvious we shouldn&#39;t use SMT there.</span>
<a name="l00269"></a>00269 <span class="comment"> *</span>
<a name="l00270"></a>00270 <span class="comment"> * Note that you can get more complete topology information from</span>
<a name="l00271"></a>00271 <span class="comment"> * gmx_cpuid_topology(), although that requires slightly more OS support.</span>
<a name="l00272"></a>00272 <span class="comment"> */</span>
<a name="l00273"></a>00273 <a class="code" href="include_2visibility_8h.html#af6d678ccc5288db95c70b9d9003f11e2">GMX_LIBGMX_EXPORT</a>
<a name="l00274"></a>00274 <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016">gmx_cpuid_x86_smt</a>
<a name="l00275"></a>00275 <a class="code" href="include_2gmx__cpuid_8h.html#ad04773382d94226b21b852a5a7403016">gmx_cpuid_x86_smt</a>(gmx_cpuid_t cpuid);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">/* Formats a text string (up to n characters) from the data structure.</span>
<a name="l00279"></a>00279 <span class="comment"> * The output will have max 80 chars between newline characters.</span>
<a name="l00280"></a>00280 <span class="comment"> */</span>
<a name="l00281"></a>00281 <span class="keywordtype">int</span>
<a name="l00282"></a>00282 <a class="code" href="include_2gmx__cpuid_8h.html#afc4544beacd8743e4d6dc41e6f92a9a7">gmx_cpuid_formatstring</a>      (gmx_cpuid_t                cpuid,
<a name="l00283"></a>00283                              <span class="keywordtype">char</span> *                     <a class="code" href="include_2gmx__blas_8h.html#a4f1e75c623bc60ab5ac886fc569598a8">s</a>,
<a name="l00284"></a>00284                              <span class="keywordtype">int</span>                        <a class="code" href="include_2gmx__arpack_8h.html#a130c0fe8bb10a3931a3f8a41bbce3ec3">n</a>);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 <span class="comment">/* Suggests a suitable gromacs acceleration based on the support in the</span>
<a name="l00288"></a>00288 <span class="comment"> * hardware.</span>
<a name="l00289"></a>00289 <span class="comment"> */</span>
<a name="l00290"></a>00290 <span class="keyword">enum</span> <a class="code" href="include_2gmx__cpuid_8h.html#af3a739406e62cd25f57e2ea4a439c4e2">gmx_cpuid_acceleration</a>
<a name="l00291"></a>00291 <a class="code" href="include_2gmx__cpuid_8h.html#aa40853b13466f4b73c2196dce35b57e4">gmx_cpuid_acceleration_suggest</a>  (gmx_cpuid_t                    cpuid);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">/* Check if this binary was compiled with the same acceleration as we</span>
<a name="l00295"></a>00295 <span class="comment"> * would suggest for the current hardware. Always print stats to the log file</span>
<a name="l00296"></a>00296 <span class="comment"> * if it is non-NULL, and print a warning in stdout if we don&#39;t have a match.</span>
<a name="l00297"></a>00297 <span class="comment"> */</span>
<a name="l00298"></a>00298 <span class="keywordtype">int</span>
<a name="l00299"></a>00299 <a class="code" href="include_2gmx__cpuid_8h.html#a064be7e3841d435f9295cbd740e3fdd2">gmx_cpuid_acceleration_check</a>    (gmx_cpuid_t                cpuid,
<a name="l00300"></a>00300                                  FILE *                     log);
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="comment">/* Release resources used by data structure. Note that the pointer to the</span>
<a name="l00304"></a>00304 <span class="comment"> * CPU brand string will no longer be valid once this routine has been called.</span>
<a name="l00305"></a>00305 <span class="comment"> */</span>
<a name="l00306"></a>00306 <span class="keywordtype">void</span>
<a name="l00307"></a>00307 <a class="code" href="include_2gmx__cpuid_8h.html#a9aca0dda7cf45ac6161238d6e4008517">gmx_cpuid_done</a>              (gmx_cpuid_t                cpuid);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00313"></a>00313 <span class="preprocessor"></span>}
<a name="l00314"></a>00314 <span class="preprocessor">#endif</span>
<a name="l00315"></a>00315 <span class="preprocessor"></span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="preprocessor">#endif </span><span class="comment">/* GMX_CPUID_H_ */</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 6 2015 16:30:28 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
