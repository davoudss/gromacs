<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: share/template/gromacs/thread_mpi/atomic.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">share/template/gromacs/thread_mpi/atomic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h_source.html">visibility.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for atomic.h:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h__incl.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h" id="share_2template_2gromacs_2thread__mpi_2atomic_8h">
<area shape="rect" id="node5" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html" title="Visibility macros." alt="" coords="155,83,235,112"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h__dep__incl.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8hdep" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8hdep" id="share_2template_2gromacs_2thread__mpi_2atomic_8hdep">
<area shape="rect" id="node3" href="TestAtomics_8c.html" title="cmake/TestAtomics.c" alt="" coords="1224,83,1373,112"/><area shape="rect" id="node5" href="include_2thread__mpi_2atomic_2suncc-sparc_8h.html" title="include/thread_mpi/atomic/suncc&#45;sparc.h" alt="" coords="1397,83,1656,112"/><area shape="rect" id="node7" href="share_2template_2gromacs_2thread__mpi_2atomic_2suncc-sparc_8h.html" title="share/template/gromacs/thread_mpi/atomic/suncc&#45;sparc.h" alt="" coords="1680,83,2037,112"/><area shape="rect" id="node9" href="share_2template_2gromacs_2thread__mpi_2collective_8h.html" title="Collective functions." alt="" coords="2112,83,2411,112"/><area shape="rect" id="node11" href="share_2template_2gromacs_2thread__mpi_8h.html" title="Convenience header file for non&#45;MPI compatibility." alt="" coords="2141,160,2381,189"/><area shape="rect" id="node13" href="share_2template_2gromacs_2tmpi_8h.html" title="Convenience header file for MPI compatibility." alt="" coords="2405,160,2608,189"/><area shape="rect" id="node15" href="share_2template_2gromacs_2thread__mpi_2list_8h.html" title="Lock&#45;free list data structures." alt="" coords="3349,83,3611,112"/><area shape="rect" id="node19" href="share_2template_2gromacs_2thread__mpi_2lock_8h.html" title="share/template/gromacs/thread_mpi/lock.h" alt="" coords="2435,83,2704,112"/><area shape="rect" id="node23" href="impl_8h.html" title="src/gmxlib/thread_mpi/impl.h" alt="" coords="2632,160,2821,189"/><area shape="rect" id="node73" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html" title="share/template/gromacs/thread_mpi/threads.h" alt="" coords="2829,83,3117,112"/><area shape="rect" id="node17" href="list_8c.html" title="src/gmxlib/thread_mpi/list.c" alt="" coords="3597,160,3779,189"/><area shape="rect" id="node25" href="alltoall_8c.html" title="src/gmxlib/thread_mpi/alltoall.c" alt="" coords="5,237,208,267"/><area shape="rect" id="node27" href="barrier_8c.html" title="src/gmxlib/thread_mpi/barrier.c" alt="" coords="232,237,432,267"/><area shape="rect" id="node29" href="bcast_8c.html" title="src/gmxlib/thread_mpi/bcast.c" alt="" coords="456,237,653,267"/><area shape="rect" id="node31" href="collective_8c.html" title="src/gmxlib/thread_mpi/collective.c" alt="" coords="677,237,896,267"/><area shape="rect" id="node33" href="comm_8c.html" title="src/gmxlib/thread_mpi/comm.c" alt="" coords="920,237,1120,267"/><area shape="rect" id="node35" href="errhandler_8c.html" title="src/gmxlib/thread_mpi/errhandler.c" alt="" coords="1144,237,1365,267"/><area shape="rect" id="node37" href="event_8c.html" title="src/gmxlib/thread_mpi/event.c" alt="" coords="1389,237,1587,267"/><area shape="rect" id="node39" href="gather_8c.html" title="src/gmxlib/thread_mpi/gather.c" alt="" coords="1611,237,1811,267"/><area shape="rect" id="node41" href="group_8c.html" title="src/gmxlib/thread_mpi/group.c" alt="" coords="1835,237,2032,267"/><area shape="rect" id="node43" href="lock_8c.html" title="src/gmxlib/thread_mpi/lock.c" alt="" coords="2056,237,2245,267"/><area shape="rect" id="node45" href="once_8c.html" title="src/gmxlib/thread_mpi/once.c" alt="" coords="2269,237,2461,267"/><area shape="rect" id="node47" href="p2p__buffer_8c.html" title="src/gmxlib/thread_mpi/p2p_buffer.c" alt="" coords="2485,237,2712,267"/><area shape="rect" id="node49" href="p2p__protocol_8c.html" title="src/gmxlib/thread_mpi/p2p_protocol.c" alt="" coords="2736,237,2973,267"/><area shape="rect" id="node51" href="p2p__send__recv_8c.html" title="src/gmxlib/thread_mpi/p2p_send_recv.c" alt="" coords="2997,237,3251,267"/><area shape="rect" id="node53" href="p2p__wait_8c.html" title="src/gmxlib/thread_mpi/p2p_wait.c" alt="" coords="3275,237,3491,267"/><area shape="rect" id="node55" href="profile_8c.html" title="src/gmxlib/thread_mpi/profile.c" alt="" coords="3515,237,3715,267"/><area shape="rect" id="node57" href="reduce_8c.html" title="src/gmxlib/thread_mpi/reduce.c" alt="" coords="3739,237,3941,267"/><area shape="rect" id="node59" href="reduce__fast_8c.html" title="src/gmxlib/thread_mpi/reduce_fast.c" alt="" coords="3965,237,4197,267"/><area shape="rect" id="node61" href="scan_8c.html" title="src/gmxlib/thread_mpi/scan.c" alt="" coords="4221,237,4413,267"/><area shape="rect" id="node63" href="scatter_8c.html" title="src/gmxlib/thread_mpi/scatter.c" alt="" coords="4437,237,4643,267"/><area shape="rect" id="node65" href="tmpi__init_8c.html" title="src/gmxlib/thread_mpi/tmpi_init.c" alt="" coords="4667,237,4880,267"/><area shape="rect" id="node67" href="tmpi__malloc_8c.html" title="src/gmxlib/thread_mpi/tmpi_malloc.c" alt="" coords="4904,237,5139,267"/><area shape="rect" id="node69" href="topology_8c.html" title="src/gmxlib/thread_mpi/topology.c" alt="" coords="5163,237,5376,267"/><area shape="rect" id="node71" href="type_8c.html" title="src/gmxlib/thread_mpi/type.c" alt="" coords="5400,237,5589,267"/><area shape="rect" id="node75" href="share_2template_2gromacs_2thread__mpi_2mutex_8h.html" title="mutex objects with C++11 API compatibility." alt="" coords="2845,160,3125,189"/><area shape="rect" id="node79" href="runner__openmm_8c.html" title="src/contrib/runner_openmm.c" alt="" coords="3149,160,3339,189"/><area shape="rect" id="node81" href="gmx__thread__affinity_8c.html" title="src/gmxlib/gmx_thread_affinity.c" alt="" coords="3363,160,3573,189"/></map>
</div>
</div>
<p><a href="share_2template_2gromacs_2thread__mpi_2atomic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtMPI__Atomic.html">tMPI_Atomic</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtMPI__Atomic__ptr.html">tMPI_Atomic_ptr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtMPI__Spinlock__t.html">tMPI_Spinlock_t</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#aebbcb661ffeffb8ab6cbe25bcdcb058e">TMPI_NO_ATOMICS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#af1d9b20785b884a3d87a575a1f226ed0">tMPI_Atomic_memory_barrier_acq</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#afa737e392a24516296c8505ac6ff1458">tMPI_Atomic_memory_barrier_rel</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1e5bbd6483e8792893f3a5e8e2bbe510">TMPI_SPINLOCK_INITIALIZER</a>&#160;&#160;&#160;{ <a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#a94b533e44508703553567bd41dfc5b2b">TMPI_THREAD_MUTEX_INITIALIZER</a> }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Spinlock static initializer.  <a href="#a1e5bbd6483e8792893f3a5e8e2bbe510"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ad046655ee56cc30c2a8719f3d1091b8e">tMPI_Atomic_get</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)&#160;&#160;&#160;((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)-&gt;value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a0769c59b89bb5ff489110f9de52658cf">tMPI_Atomic_ptr_get</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)&#160;&#160;&#160;((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)-&gt;value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a3659bcc9f4e4e85a744ca0261a06b863">tMPI_Spinlock_init</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#acbd87bb346dba07abbd0adb00ad12221">tMPI_Thread_mutex_init</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a2803cb18c476e44a4d3a830d0bbf9ba8">tMPI_Spinlock_lock</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c">tMPI_Thread_mutex_lock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a9b3ce3dc46a8e6a118f61dec7acf8e30">tMPI_Spinlock_trylock</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#ab996a7c928cbb10e639cfac345c67755">tMPI_Thread_mutex_trylock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5c95f5615cb4db717971ffd7840e9205">tMPI_Spinlock_unlock</a>(<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc">tMPI_Thread_mutex_unlock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a19af2d47b251f907baa8d2758da5c130">tMPI_Atomic_memory_barrier_acq</a>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a54eec8d5cf2512beb260cd4536db1e69">tMPI_Atomic_memory_barrier_rel</a>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtMPI__Atomic.html">tMPI_Atomic</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtMPI__Atomic__ptr.html">tMPI_Atomic_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a656620d5b78214f23f4b7214ff7a6f94">tMPI_Atomic_set</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, int <a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a3c7542401c1cb8bd37ef5e7d9eb0f5a8">i</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a4a33bfcb81731d031d1b24e8d781f1eb">tMPI_Atomic_ptr_set</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#aca56ce0d6bb80e99248d9372f2caf0f9">tMPI_Atomic_add_return</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, int <a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a3c7542401c1cb8bd37ef5e7d9eb0f5a8">i</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#acaa08636b69ebeb6b4db98dc98a43a05">tMPI_Atomic_fetch_add</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, int <a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a3c7542401c1cb8bd37ef5e7d9eb0f5a8">i</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1ee85ed30df14b0ceec8a545aef21949">tMPI_Atomic_cas</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, int old_val, int new_val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ae551c907723789ef6916cc1e9c574849">tMPI_Atomic_ptr_cas</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *old_val, <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *new_val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1b731ce7966268885553ac950ff334d7">tMPI_Spinlock_islocked</a> (const <a class="el" href="structtMPI__Spinlock__t.html">tMPI_Spinlock_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#abe9d8b9affd3d12fae787f6a8ce11a15">tMPI_Spinlock_wait</a> (<a class="el" href="structtMPI__Spinlock__t.html">tMPI_Spinlock_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a074d179d707dbb58a2bc6721911f7925">tMPI_Atomic_swap</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, int <a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#afb462a5dea72ae7992f073bfd756fb5f">b</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1959878474634cb56195f17c3f2590dd">tMPI_Atomic_ptr_swap</a> (<a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>, <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#afb462a5dea72ae7992f073bfd756fb5f">b</a>)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtMPI__Thread__mutex__t.html">tMPI_Thread_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a739e0f735aed0e9b11581264cd658f46">tMPI_Atomic_mutex</a> = <a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#a94b533e44508703553567bd41dfc5b2b">TMPI_THREAD_MUTEX_INITIALIZER</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad046655ee56cc30c2a8719f3d1091b8e"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_get" ref="ad046655ee56cc30c2a8719f3d1091b8e" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ad046655ee56cc30c2a8719f3d1091b8e">tMPI_Atomic_get</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)-&gt;value)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return value of an atomic integer</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic variable to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Integer value of the atomic variable </dd></dl>

</div>
</div>
<a class="anchor" id="a5d2ee17509e3123d1c71d00b02888daa"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_memory_barrier" ref="a5d2ee17509e3123d1c71d00b02888daa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory barrier operation</p>
<p>Modern CPUs rely heavily on out-of-order execution, and one common feature is that load/stores might be reordered. Also, when using inline assembly the compiler might already have loaded the variable we are changing into a register, so any update to memory won't be visible.</p>
<p>This command creates a memory barrier, i.e. all memory results before it in the code should be visible to all memory operations after it - the CPU cannot propagate load/stores across it.</p>
<p>This barrier is a full barrier: all load and store operations of instructions before it are completed, while all load and store operations that are in instructions after it won't be done before this barrier. </p>

</div>
</div>
<a class="anchor" id="af1d9b20785b884a3d87a575a1f226ed0"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_memory_barrier_acq" ref="af1d9b20785b884a3d87a575a1f226ed0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a19af2d47b251f907baa8d2758da5c130">tMPI_Atomic_memory_barrier_acq</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory barrier operation with acquire semantics</p>
<p>This barrier is a barrier with acquire semantics: the terminology comes from its common use after acquiring a lock: all load/store instructions after this barrier may not be re-ordered to happen before this barrier. </p>

</div>
</div>
<a class="anchor" id="a19af2d47b251f907baa8d2758da5c130"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_memory_barrier_acq" ref="a19af2d47b251f907baa8d2758da5c130" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a19af2d47b251f907baa8d2758da5c130">tMPI_Atomic_memory_barrier_acq</a>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory barrier operation with acquire semantics</p>
<p>This barrier is a barrier with acquire semantics: the terminology comes from its common use after acquiring a lock: all load/store instructions after this barrier may not be re-ordered to happen before this barrier. </p>

</div>
</div>
<a class="anchor" id="afa737e392a24516296c8505ac6ff1458"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_memory_barrier_rel" ref="afa737e392a24516296c8505ac6ff1458" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a54eec8d5cf2512beb260cd4536db1e69">tMPI_Atomic_memory_barrier_rel</a></td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory barrier operation with release semantics</p>
<p>This barrier is a barrier with release semantics: the terminology comes from its common use before releasing a lock: all load/store instructions before this barrier may not be re-ordered to happen after this barrier. </p>

</div>
</div>
<a class="anchor" id="a54eec8d5cf2512beb260cd4536db1e69"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_memory_barrier_rel" ref="a54eec8d5cf2512beb260cd4536db1e69" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a54eec8d5cf2512beb260cd4536db1e69">tMPI_Atomic_memory_barrier_rel</a>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a5d2ee17509e3123d1c71d00b02888daa">tMPI_Atomic_memory_barrier</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Memory barrier operation with release semantics</p>
<p>This barrier is a barrier with release semantics: the terminology comes from its common use before releasing a lock: all load/store instructions before this barrier may not be re-ordered to happen after this barrier. </p>

</div>
</div>
<a class="anchor" id="a0769c59b89bb5ff489110f9de52658cf"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_ptr_get" ref="a0769c59b89bb5ff489110f9de52658cf" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a0769c59b89bb5ff489110f9de52658cf">tMPI_Atomic_ptr_get</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a0880879736d1ab747a972d1942421886">a</a>)-&gt;value)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return value of an atomic pointer</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic variable to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer value of the atomic variable </dd></dl>

</div>
</div>
<a class="anchor" id="aebbcb661ffeffb8ab6cbe25bcdcb058e"></a><!-- doxytag: member="atomic.h::TMPI_NO_ATOMICS" ref="aebbcb661ffeffb8ab6cbe25bcdcb058e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#aebbcb661ffeffb8ab6cbe25bcdcb058e">TMPI_NO_ATOMICS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Indicates that no support for atomic operations is present. </p>

</div>
</div>
<a class="anchor" id="a3659bcc9f4e4e85a744ca0261a06b863"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_init" ref="a3659bcc9f4e4e85a744ca0261a06b863" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_2xlc__ppc_8h.html#a43bcfcb921d49a8a459787430b948727">tMPI_Spinlock_init</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#acbd87bb346dba07abbd0adb00ad12221">tMPI_Thread_mutex_init</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize spinlock</p>
<p>In theory you can call this from multiple threads, but remember that we don't check for errors. If the first thread proceeded to lock the spinlock after initialization, the second will happily overwrite the contents and unlock it without warning you.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1e5bbd6483e8792893f3a5e8e2bbe510"></a><!-- doxytag: member="atomic.h::TMPI_SPINLOCK_INITIALIZER" ref="a1e5bbd6483e8792893f3a5e8e2bbe510" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1e5bbd6483e8792893f3a5e8e2bbe510">TMPI_SPINLOCK_INITIALIZER</a>&#160;&#160;&#160;{ <a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#a94b533e44508703553567bd41dfc5b2b">TMPI_THREAD_MUTEX_INITIALIZER</a> }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Spinlock static initializer. </p>
<p>This is used for static spinlock initialization, and has the same properties as TMPI_THREAD_MUTEX_INITIALIZER has for mutexes. This is only for inlining in the tMPI_Thread.h header file. Whether it is 0, 1, or something else when unlocked depends on the platform. Don't assume anything about it. It might even be a mutex when using the fallback implementation! </p>

</div>
</div>
<a class="anchor" id="a2803cb18c476e44a4d3a830d0bbf9ba8"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_lock" ref="a2803cb18c476e44a4d3a830d0bbf9ba8" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_2xlc__ppc_8h.html#ae1329dd787dd2280bef3e4f931acd78d">tMPI_Spinlock_lock</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c">tMPI_Thread_mutex_lock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Acquire spinlock</p>
<p>This routine blocks until the spinlock is available, and the locks it again before returning.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9b3ce3dc46a8e6a118f61dec7acf8e30"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_trylock" ref="a9b3ce3dc46a8e6a118f61dec7acf8e30" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_2xlc__ppc_8h.html#a1181c0c3e26cb0ce21564d48c44c5f8b">tMPI_Spinlock_trylock</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#ab996a7c928cbb10e639cfac345c67755">tMPI_Thread_mutex_trylock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attempt to acquire spinlock</p>
<p>This routine acquires the spinlock if possible, but if already locked it return an error code immediately.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if the mutex was available so we could lock it, otherwise a non-zero integer (1) if the lock is busy. </dd></dl>

</div>
</div>
<a class="anchor" id="a5c95f5615cb4db717971ffd7840e9205"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_unlock" ref="a5c95f5615cb4db717971ffd7840e9205" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_2xlc__ppc_8h.html#a0058b8c076a24c3a769a4e452a83b62b">tMPI_Spinlock_unlock</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc">tMPI_Thread_mutex_unlock</a>((<a class="el" href="share_2template_2gromacs_2gmx__lapack_8h.html#a36b8fb392443aff4dd09ac968a2acfe8">x</a>)-&gt;lock)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release spinlock</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer</td></tr>
  </table>
  </dd>
</dl>
<p>Unlocks the spinlock, regardless if which thread locked it. </p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a4c91c0105f1c0a5f23bc4239274291eb"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_ptr_t" ref="a4c91c0105f1c0a5f23bc4239274291eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtMPI__Atomic__ptr.html">tMPI_Atomic_ptr</a>
 <a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic pointer type equivalent to tMPI_Atomic_t</p>
<p>Useful for lock-free and wait-free data structures. The only operations available for this type are: </p>
<dl class="see"><dt><b>See also:</b></dt><dd><ul>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a0769c59b89bb5ff489110f9de52658cf">tMPI_Atomic_ptr_get</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a4a33bfcb81731d031d1b24e8d781f1eb">tMPI_Atomic_ptr_set</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ae551c907723789ef6916cc1e9c574849">tMPI_Atomic_ptr_cas</a> </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a2c33794dc540e3b07cffc1f81a3fe4b4"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_t" ref="a2c33794dc540e3b07cffc1f81a3fe4b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtMPI__Atomic.html">tMPI_Atomic</a>
 <a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic operations datatype</p>
<p>Portable synchronization primitives like mutexes are effective for many purposes, but usually not very high performance. One of the problem is that you have the overhead of a function call, and another is that Mutexes often have extra overhead to make the scheduling fair. Finally, if performance is important we don't want to suspend the thread if we cannot lock a mutex, but spin-lock at 100% CPU usage until the resources is available (e.g. increment a counter).</p>
<p>These things can often be implemented with inline-assembly or other system-dependent functions, and we provide such functionality for the most common platforms. For portability we also have a fallback implementation using a mutex for locking.</p>
<p>Performance-wise, the fastest solution is always to avoid locking completely (obvious, but remember it!). If you cannot do that, the next best thing is to use atomic operations that e.g. increment a counter without explicit locking. Spinlocks are useful to lock an entire region, but leads to more overhead and can be difficult to debug - it is up to you to make sure that only the thread owning the lock unlocks it!</p>
<p>You should normally NOT use atomic operations for things like I/O threads. These should yield to other threads while waiting for the disk instead of spinning at 100% CPU usage.</p>
<p>It is imperative that you use the provided routines for reading and writing, since some implementations require memory barriers before the CPU or memory sees an updated result. The structure contents is only visible here so it can be inlined for performance - it might change without further notice.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>No initialization is required for atomic variables.</dd></dl>
<p>Currently, we have (real) atomic operations for:</p>
<ul>
<li>gcc version 4.1 and later (all platforms)</li>
<li>x86 or x86_64, using GNU compilers</li>
<li>x86 or x86_64, using Intel compilers</li>
<li>x86 or x86_64, using Pathscale compilers</li>
<li>Itanium, using GNU compilers</li>
<li>Itanium, using Intel compilers</li>
<li>Itanium, using HP compilers</li>
<li>PowerPC, using GNU compilers</li>
<li>PowerPC, using IBM AIX compilers</li>
<li>PowerPC, using IBM compilers &gt;=7.0 under Linux or Mac OS X.</li>
</ul>
<dl class="see"><dt><b>See also:</b></dt><dd><ul>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ad046655ee56cc30c2a8719f3d1091b8e">tMPI_Atomic_get</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a656620d5b78214f23f4b7214ff7a6f94">tMPI_Atomic_set</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1ee85ed30df14b0ceec8a545aef21949">tMPI_Atomic_cas</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#aca56ce0d6bb80e99248d9372f2caf0f9">tMPI_Atomic_add_return</a></li>
<li><a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#acaa08636b69ebeb6b4db98dc98a43a05">tMPI_Atomic_fetch_add</a> </li>
</ul>
</dd></dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aca56ce0d6bb80e99248d9372f2caf0f9"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_add_return" ref="aca56ce0d6bb80e99248d9372f2caf0f9" args="(tMPI_Atomic_t *a, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#aca56ce0d6bb80e99248d9372f2caf0f9">tMPI_Atomic_add_return</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add integer to atomic variable</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>atomic datatype to modify </td></tr>
    <tr><td class="paramname">i</td><td>integer to increment with. Use i&lt;0 to subtract atomically.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The new value (after summation). </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_aca56ce0d6bb80e99248d9372f2caf0f9_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_aca56ce0d6bb80e99248d9372f2caf0f9_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_aca56ce0d6bb80e99248d9372f2caf0f9_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_aca56ce0d6bb80e99248d9372f2caf0f9_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="229,5,400,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="223,59,407,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1ee85ed30df14b0ceec8a545aef21949"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_cas" ref="a1ee85ed30df14b0ceec8a545aef21949" args="(tMPI_Atomic_t *a, int old_val, int new_val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1ee85ed30df14b0ceec8a545aef21949">tMPI_Atomic_cas</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>old_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic compare-and-swap operation</p>
<p>The <em>old</em> value is compared with the memory value in the atomic datatype. If the are identical, the atomic type is swapped with the new value, and otherwise left unchanged.</p>
<p>This is *the* synchronization primitive: it has a consensus number of infinity, and is available in some form on all modern CPU architectures. In the words of Herlihy&amp;Shavit (The art of multiprocessor programming), it is the 'king of all wild things'.</p>
<p>In practice, use it as follows: You can start by reading a value (without locking anything), perform some calculations, and then atomically try to update it in memory unless it has changed. If it has changed you will get an error return code - reread the new value an repeat the calculations in that case.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic datatype ('memory' value) </td></tr>
    <tr><td class="paramname">old_val</td><td>Integer value read from the atomic type at an earlier point </td></tr>
    <tr><td class="paramname">new_val</td><td>New value to write to the atomic type if it currently is identical to the old value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True (1) if the swap occurred: i.e. if the value in a was equal to old_val. False (0) if the swap didn't occur and the value was not equal to old_val.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The exchange occured if the return value is identical to <em>old</em>. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="189,5,360,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="183,59,367,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_icgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_icgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_icgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1ee85ed30df14b0ceec8a545aef21949_icgraph">
<area shape="rect" id="node3" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a074d179d707dbb58a2bc6721911f7925" title="tMPI_Atomic_swap" alt="" coords="181,5,317,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acaa08636b69ebeb6b4db98dc98a43a05"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_fetch_add" ref="acaa08636b69ebeb6b4db98dc98a43a05" args="(tMPI_Atomic_t *a, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#acaa08636b69ebeb6b4db98dc98a43a05">tMPI_Atomic_fetch_add</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add to variable, return the old value.</p>
<p>This operation is quite useful for synchronization counters. By performing a fetchadd with N, a thread can e.g. reserve a chunk with the next N iterations, and the return value is the index of the first element to treat.</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>atomic datatype to modify </td></tr>
    <tr><td class="paramname">i</td><td>integer to increment with. Use i&lt;0 to subtract atomically.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The value of the atomic variable before addition. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_acaa08636b69ebeb6b4db98dc98a43a05_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_acaa08636b69ebeb6b4db98dc98a43a05_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_acaa08636b69ebeb6b4db98dc98a43a05_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_acaa08636b69ebeb6b4db98dc98a43a05_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="224,5,395,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="217,59,401,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae551c907723789ef6916cc1e9c574849"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_ptr_cas" ref="ae551c907723789ef6916cc1e9c574849" args="(tMPI_Atomic_ptr_t *a, void *old_val, void *new_val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ae551c907723789ef6916cc1e9c574849">tMPI_Atomic_ptr_cas</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *&#160;</td>
          <td class="paramname"><em>old_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *&#160;</td>
          <td class="paramname"><em>new_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic pointer compare-and-swap operation</p>
<p>The <em>old</em> value is compared with the memory value in the atomic datatype. If the are identical, the atomic type is swapped with the new value, and otherwise left unchanged.</p>
<p>This is essential for implementing wait-free lists and other data structures. See '<a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1ee85ed30df14b0ceec8a545aef21949">tMPI_Atomic_cas()</a>'.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic datatype ('memory' value) </td></tr>
    <tr><td class="paramname">old_val</td><td>Pointer value read from the atomic type at an earlier point </td></tr>
    <tr><td class="paramname">new_val</td><td>New value to write to the atomic type if it currently is identical to the old value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True (1) if the swap occurred: i.e. if the value in a was equal to old_val. False (0) if the swap didn't occur and the value was not equal to old_val.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The exchange occured if the return value is identical to <em>old</em>. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="211,5,381,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="204,59,388,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_icgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_icgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_icgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_ae551c907723789ef6916cc1e9c574849_icgraph">
<area shape="rect" id="node3" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1959878474634cb56195f17c3f2590dd" title="tMPI_Atomic_ptr_swap" alt="" coords="204,5,361,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a33bfcb81731d031d1b24e8d781f1eb"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_ptr_set" ref="a4a33bfcb81731d031d1b24e8d781f1eb" args="(tMPI_Atomic_t *a, void *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a4a33bfcb81731d031d1b24e8d781f1eb">tMPI_Atomic_ptr_set</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write value to an atomic pointer</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic variable </td></tr>
    <tr><td class="paramname">p</td><td>Pointer value to set the atomic variable to. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a4a33bfcb81731d031d1b24e8d781f1eb_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a4a33bfcb81731d031d1b24e8d781f1eb_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a4a33bfcb81731d031d1b24e8d781f1eb_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a4a33bfcb81731d031d1b24e8d781f1eb_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="208,5,379,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="201,59,385,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1959878474634cb56195f17c3f2590dd"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_ptr_swap" ref="a1959878474634cb56195f17c3f2590dd" args="(tMPI_Atomic_ptr_t *a, void *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a>* <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1959878474634cb56195f17c3f2590dd">tMPI_Atomic_ptr_swap</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a4c91c0105f1c0a5f23bc4239274291eb">tMPI_Atomic_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic swap pointer operation.</p>
<p>Atomically swaps the pointer in the tMPI_Atomic_ptr_t operand with the value of b. NOTE: DON'T USE YET! (This has no good asm counterparts on many architectures).</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Pointer to atomic type </td></tr>
    <tr><td class="paramname">b</td><td>Value to swap </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the original value of a </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1959878474634cb56195f17c3f2590dd_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a1959878474634cb56195f17c3f2590dd_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1959878474634cb56195f17c3f2590dd_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a1959878474634cb56195f17c3f2590dd_cgraph">
<area shape="rect" id="node3" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#ae551c907723789ef6916cc1e9c574849" title="tMPI_Atomic_ptr_cas" alt="" coords="215,32,361,61"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="419,5,589,35"/><area shape="rect" id="node7" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="412,59,596,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a656620d5b78214f23f4b7214ff7a6f94"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_set" ref="a656620d5b78214f23f4b7214ff7a6f94" args="(tMPI_Atomic_t *a, int i)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a656620d5b78214f23f4b7214ff7a6f94">tMPI_Atomic_set</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write value to an atomic integer</p>
<p>Also implements proper memory barriers when necessary. The actual implementation is system-dependent.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Atomic variable </td></tr>
    <tr><td class="paramname">i</td><td>Integer to set the atomic variable to. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a656620d5b78214f23f4b7214ff7a6f94_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a656620d5b78214f23f4b7214ff7a6f94_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a656620d5b78214f23f4b7214ff7a6f94_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a656620d5b78214f23f4b7214ff7a6f94_cgraph">
<area shape="rect" id="node3" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="184,5,355,35"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="177,59,361,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a074d179d707dbb58a2bc6721911f7925"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_swap" ref="a074d179d707dbb58a2bc6721911f7925" args="(tMPI_Atomic_t *a, int b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a074d179d707dbb58a2bc6721911f7925">tMPI_Atomic_swap</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2thread__mpi_2atomic_2gcc_8h.html#a2c33794dc540e3b07cffc1f81a3fe4b4">tMPI_Atomic_t</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Atomic swap operation.</p>
<p>Atomically swaps the data in the tMPI_Atomic_t operand with the value of b. NOTE: DON'T USE YET! (This has no good asm counterparts on many architectures).</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Pointer to atomic type </td></tr>
    <tr><td class="paramname">b</td><td>Value to swap </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the original value of a </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="share_2template_2gromacs_2thread__mpi_2atomic_8h_a074d179d707dbb58a2bc6721911f7925_cgraph.png" border="0" usemap="#share_2template_2gromacs_2thread__mpi_2atomic_8h_a074d179d707dbb58a2bc6721911f7925_cgraph" alt=""/></div>
<map name="share_2template_2gromacs_2thread__mpi_2atomic_8h_a074d179d707dbb58a2bc6721911f7925_cgraph" id="share_2template_2gromacs_2thread__mpi_2atomic_8h_a074d179d707dbb58a2bc6721911f7925_cgraph">
<area shape="rect" id="node3" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1ee85ed30df14b0ceec8a545aef21949" title="tMPI_Atomic_cas" alt="" coords="191,32,316,61"/><area shape="rect" id="node5" href="include_2thread__mpi_2threads_8h.html#acae0fb1517edd9f21951ac4c4d9c782c" title="tMPI_Thread_mutex_lock" alt="" coords="373,5,544,35"/><area shape="rect" id="node7" href="include_2thread__mpi_2threads_8h.html#ac4518a42e32f81ea1518f90542191fcc" title="tMPI_Thread_mutex_unlock" alt="" coords="367,59,551,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1b731ce7966268885553ac950ff334d7"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_islocked" ref="a1b731ce7966268885553ac950ff334d7" args="(const tMPI_Spinlock_t *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> int <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a1b731ce7966268885553ac950ff334d7">tMPI_Spinlock_islocked</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtMPI__Spinlock__t.html">tMPI_Spinlock_t</a> *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if spinlock is locked</p>
<p>This routine returns immediately with the lock status.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if the spinlock is locked, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="abe9d8b9affd3d12fae787f6a8ce11a15"></a><!-- doxytag: member="atomic.h::tMPI_Spinlock_wait" ref="abe9d8b9affd3d12fae787f6a8ce11a15" args="(tMPI_Spinlock_t *x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="share_2template_2gromacs_2thread__mpi_2visibility_8h.html#a1b2991140928309c56dcbe825bffb97e">TMPI_EXPORT</a> <a class="el" href="nbnxn__kernel__simd__4xn__outer_8h.html#a8dc3f4a797ed992dff49d2fa3477eee8">void</a> <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#abe9d8b9affd3d12fae787f6a8ce11a15">tMPI_Spinlock_wait</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtMPI__Spinlock__t.html">tMPI_Spinlock_t</a> *&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait for a spinlock to become available</p>
<p>This routine blocks until the spinlock is unlocked, but in contrast to <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a2803cb18c476e44a4d3a830d0bbf9ba8">tMPI_Spinlock_lock()</a> it returns without trying to lock the spinlock.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Spinlock pointer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a739e0f735aed0e9b11581264cd658f46"></a><!-- doxytag: member="atomic.h::tMPI_Atomic_mutex" ref="a739e0f735aed0e9b11581264cd658f46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtMPI__Thread__mutex__t.html">tMPI_Thread_mutex_t</a> <a class="el" href="share_2template_2gromacs_2thread__mpi_2atomic_8h.html#a739e0f735aed0e9b11581264cd658f46">tMPI_Atomic_mutex</a> = <a class="el" href="share_2template_2gromacs_2thread__mpi_2threads_8h.html#a94b533e44508703553567bd41dfc5b2b">TMPI_THREAD_MUTEX_INITIALIZER</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>System mutex used for locking to guarantee atomicity </p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 20 2014 17:22:25 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
